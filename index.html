<!doctype HTML>
<html lang="en" ng-app="myApp">
	<head>
		<title>Waitstaff Calculator</title>
		<meta charset="UTF-8">
		<meta name="viewport" content="width=device-width, initial-scale=1.0">
		<link rel="stylesheet" href="style.css" type="text/css" />
		<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.4/jquery.min.js"></script>
		<script src="../js/fitText.js"></script>
	</head>

	<body>
		<div id="container" ng-controller="myCtrl">
			<div class="headerDiv">
				Waitstaff Calculator
			</div>

			<section id="errorMessages" ng-cloak>
				<p class="errorMsg" ng-show="myForm.baseMealPrice.$invalid && myForm.baseMealPrice.$touched">Base Meal Price must be numeric</p>
				<p class="errorMsg" ng-show="myForm.taxRate.$invalid && myForm.taxRate.$touched">Tax Rate must be numeric</p>
				<p class="errorMsg" ng-show="myForm.tipPercentage.$invalid && myForm.tipPercentage.$touched">Tip Percentage must be numeric</p>
			</section>

			<div id="leftDiv">
				<div class="headerDiv">
					Enter the Meal Details
				</div>
				<div class="inputsDiv">
					<form novalidate name="myForm" ng-submit="doSubmit(myForm.$valid)">
						<table width="100%">
							<tr>
								<td>Base Meal Price:</td>
								<td style="text-align:right;">$</td>
								<td><input type="text" name="baseMealPrice" ng-model="data.baseMealPrice" ng-pattern="numPattern" required /></td>
							</tr>
							<tr>
								<td>Tax Rate:</td>
								<td style="text-align:right;">%</td>
								<td><input type="text" name="taxRate" ng-model="data.taxRate" ng-pattern="numPattern" required /></td>
							</tr>
							<tr>
								<td>Tip Percentage:</td>
								<td style="text-align:right;">%</td>
								<td><input type="text" name="tipPercentage" ng-model="data.tipPercentage"  ng-pattern="numPattern" required /></td>
							</tr>
							<tr>
								<td></td>
								<td></td>
								<td style="text-align:center"><button type="submit" class="myButton" value="submit" name="submit" id="submit" ng-disabled="myForm.$invalid">Submit</button>
									<button type="button" class="myButton" name="cancel" id="cancel" ng-click="doCancel()">Cancel</button>
								</td>
						</table>
					</form>
				</div>
			</div>

			<div id="rightDiv">
				<div style="border:1px solid #000;">
					<div class="headerDiv">
						Customer Charges
					</div>
					<div class="inputsDiv">
						<table width="100%">
							<tr>
								<td width="50%">Subtotal:</td>
								<td style="text-align:right;">{{subTotal | currency}}</td>
							</tr>
							<tr>
								<td>Tip:</td>
								<td style="text-align:right;">{{tip | currency}}</td>
							</tr>
							<tr>
								<td colspan="2"><hr class="fancy-line" /></td>
							<tr>
								<td>Total:</td>
								<td style="text-align:right;">{{chargesTotal | currency}}</td>
							</tr>
						</table>
					</div>
				</div>

				<div style="margin-top:30px; border:1px solid #000;">
					<div class="headerDiv">
						My Earnings Info
					</div>
					<div class="inputsDiv">
						<table width="100%">
							<tr>
								<td width="50%">Tip Total:</td>
								<td style="text-align:right;">{{tipTotal | currency}}</td>
							</tr>
							<tr>
								<td>Meal Count:</td>
								<td style="text-align:right;">{{numMeals}}</td>
							</tr>
							<tr>
								<td>Avg Tip per Meal:</td>
								<td style="text-align:right;">{{avgTipMeal | currency}}</td>
							</tr>
						</table>
					</div>
				</div>
			</div>
			
			<br style="clear:both;" />
			
			<div style="text-align:right;margin: 5px;">
				<button ng-click="reset()" class="myButton" name="reset" id="reset">Reset</button>
			</div>
		
		
		
		
		
		
		
		
		
		
		
		
		
		
		
		
		
		
	</div>
		<script>
			$(".headerDiv").fitText();
			$("#leftDiv").height($("#rightDiv").height());
		</script>
		<script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.3.15/angular.min.js"></script>
		<script src="myApp.js"></script>
	</body>
</html>